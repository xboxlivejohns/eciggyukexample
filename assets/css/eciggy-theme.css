/* Eciggy UK dark-luxe flavour system tokens + components; apply classes per comments. */
:root {
  color-scheme: dark;
  /* Typography */
  --font-family-base: "Segoe UI", system-ui, -apple-system, BlinkMacSystemFont, "Helvetica Neue", sans-serif;
  --font-family-accent: var(--font-family-base);
  --font-size-xs: 0.75rem;
  --font-size-sm: 0.875rem;
  --font-size-base: 1rem;
  --font-size-lg: 1.125rem;
  --font-size-xl: 1.375rem;
  --font-weight-regular: 400;
  --font-weight-medium: 500;
  --font-weight-semibold: 600;
  --font-letter-spacing-tight: -0.01em;

  /* Spacing scale (rem) */
  --space-2xs: 0.25rem;
  --space-xs: 0.5rem;
  --space-sm: 0.75rem;
  --space-md: 1rem;
  --space-lg: 1.5rem;
  --space-xl: 2rem;
  --space-2xl: 3rem;

  /* Radii */
  --radius-xs: 0.25rem;
  --radius-sm: 0.5rem;
  --radius-md: 0.75rem;
  --radius-lg: 1.5rem;
  --radius-pill: 999px;

  /* Shadows */
  --shadow-soft: 0 10px 30px rgba(0, 0, 0, 0.35);
  --shadow-strong: 0 18px 45px rgba(0, 0, 0, 0.55);
  --shadow-glow: 0 0 0 1px rgba(255, 255, 255, 0.08), 0 0 25px rgba(255, 255, 255, 0.16);

  /* Z-index */
  --z-nav: 1000;
  --z-nav-overlay: 999;
  --z-modal: 1100;
  --z-toast: 1200;

  /* Timings */
  --transition-fast: 140ms;
  --transition-medium: 240ms;
  --transition-slow: 480ms;
  --easing-standard: cubic-bezier(0.25, 0.1, 0.25, 1);
  --easing-soft: cubic-bezier(0.33, 1, 0.68, 1);

  /* Neutral palette */
  --color-bg-1000: #050608;
  --color-bg-900: #0a0c12;
  --color-bg-800: #11141d;
  --color-bg-700: #171c27;
  --color-bg-glass: rgba(13, 16, 24, 0.7);
  --color-ink-100: #f5f6f9;
  --color-ink-200: #d9dde6;
  --color-ink-300: #b8bfd1;
  --color-ink-muted: rgba(236, 239, 245, 0.64);
  --color-border-subtle: rgba(255, 255, 255, 0.06);
  --color-border-strong: rgba(255, 255, 255, 0.18);

  /* Fruit accents */
  --color-lemon-400: #f8e07e;
  --color-lemon-500: #f7d34d;
  --color-straw-400: #ff7a9f;
  --color-straw-500: #ff4f79;
  --color-blue-400: #6aa0ff;
  --color-blue-500: #3f7bff;
  --color-grape-400: #b18cff;
  --color-grape-500: #8d5eff;
  --color-currant-400: #c863ff;
  --color-currant-500: #9c30e0;
  --color-mango-500: #ff9b4b;
  --color-apple-500: #7fcf6a;

  /* Accent defaults */
  --color-accent: var(--color-mango-500);
  --color-accent-soft: color-mix(in srgb, var(--color-accent) 30%, transparent);
  --color-accent-contrast: #1a1000;
  --focus-ring-color: var(--color-accent);
  --underline-accent: linear-gradient(90deg, color-mix(in srgb, var(--color-accent) 60%, white 10%) 0%, var(--color-accent) 100%);

  /* Gradients */
  --gradient-juice: linear-gradient(135deg, rgba(255, 163, 70, 0.9), rgba(105, 70, 255, 0.65));
  --gradient-highlight: linear-gradient(135deg, rgba(255, 255, 255, 0.18), rgba(255, 255, 255, 0));

  /* Textures */
  --noise-texture: var(--noise-texture, url('#noise-texture'));
  --pattern-seeds: var(--pattern-seeds, url('#pattern-seeds'));
  --mask-sticker-edge: var(--mask-sticker-edge, url('#mask-sticker-edge'));
  --mask-juice-drip: var(--mask-juice-drip, url('#mask-juice-drip'));

  /* Component dims */
  --nav-height: 4.5rem;
  --max-content-width: 1200px;
}

html {
  font-size: 100%;
  background: radial-gradient(circle at top left, rgba(255, 196, 104, 0.08), transparent 35%),
    radial-gradient(circle at bottom right, rgba(104, 139, 255, 0.08), transparent 40%),
    var(--color-bg-1000);
  color: var(--color-ink-100);
  min-height: 100%;
  scroll-behavior: smooth;
}

body {
  margin: 0;
  font-family: var(--font-family-base);
  font-size: var(--font-size-base);
  font-weight: var(--font-weight-regular);
  letter-spacing: var(--font-letter-spacing-tight);
  background: linear-gradient(180deg, rgba(8, 9, 14, 0.65) 0%, rgba(8, 9, 14, 0.9) 60%, #06070b 100%);
  color: inherit;
}

* {
  box-sizing: border-box;
}

img, svg {
  display: block;
  max-width: 100%;
}

a {
  color: inherit;
  text-decoration: none;
}

a:hover,
a:focus {
  text-decoration: none;
}

::selection {
  background: color-mix(in srgb, var(--color-accent) 40%, rgba(255, 255, 255, 0.08));
  color: #101217;
}

/* Theme modifiers for html/body wrappers */
.theme--lemon {
  --color-accent: var(--color-lemon-500);
  --color-accent-soft: color-mix(in srgb, var(--color-lemon-400) 45%, transparent);
  --color-accent-contrast: #201900;
  --focus-ring-color: var(--color-lemon-500);
  --underline-accent: linear-gradient(90deg, rgba(248, 224, 126, 0.8), var(--color-lemon-500));
}

.theme--strawberry {
  --color-accent: var(--color-straw-500);
  --color-accent-soft: color-mix(in srgb, var(--color-straw-400) 45%, transparent);
  --color-accent-contrast: #2b040d;
  --focus-ring-color: var(--color-straw-500);
  --underline-accent: linear-gradient(90deg, rgba(255, 143, 176, 0.85), var(--color-straw-500));
}

.theme--blueberry {
  --color-accent: var(--color-blue-500);
  --color-accent-soft: color-mix(in srgb, var(--color-blue-400) 45%, transparent);
  --color-accent-contrast: #040a1f;
  --focus-ring-color: var(--color-blue-500);
  --underline-accent: linear-gradient(90deg, rgba(106, 160, 255, 0.85), var(--color-blue-500));
}

.theme--grape {
  --color-accent: var(--color-grape-500);
  --color-accent-soft: color-mix(in srgb, var(--color-grape-400) 45%, transparent);
  --color-accent-contrast: #140822;
  --focus-ring-color: var(--color-grape-500);
  --underline-accent: linear-gradient(90deg, rgba(177, 140, 255, 0.85), var(--color-grape-500));
}

.theme--blackcurrant {
  --color-accent: var(--color-currant-500);
  --color-accent-soft: color-mix(in srgb, var(--color-currant-400) 45%, transparent);
  --color-accent-contrast: #18041f;
  --focus-ring-color: var(--color-currant-500);
  --underline-accent: linear-gradient(90deg, rgba(200, 99, 255, 0.85), var(--color-currant-500));
}

main,
.section {
  width: min(100%, var(--max-content-width));
  margin: 0 auto;
  padding: var(--space-2xl) var(--space-lg);
}

/* NAVIGATION */
.nav {
  position: sticky;
  top: 0;
  z-index: var(--z-nav);
  height: var(--nav-height);
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0 var(--space-lg);
  background: color-mix(in srgb, var(--color-bg-glass) 80%, transparent);
  backdrop-filter: blur(18px) saturate(130%);
  border-bottom: 1px solid var(--color-border-subtle);
  transition: background var(--transition-medium) var(--easing-standard),
    box-shadow var(--transition-medium) var(--easing-standard),
    border-color var(--transition-medium) var(--easing-standard);
}

.nav::after {
  content: "";
  position: absolute;
  inset: 0;
  background: radial-gradient(circle at top left, rgba(255, 205, 96, 0.12), transparent 60%),
    radial-gradient(circle at bottom right, rgba(140, 104, 255, 0.12), transparent 65%);
  mix-blend-mode: screen;
  opacity: 0.35;
  pointer-events: none;
  mask-image: var(--noise-texture);
  mask-size: 140px;
  mask-repeat: repeat;
}

.nav.is-scrolled {
  background: color-mix(in srgb, rgba(8, 9, 14, 0.88) 90%, transparent);
  box-shadow: 0 24px 45px rgba(3, 4, 8, 0.6);
  border-color: rgba(255, 255, 255, 0.08);
}

.nav__inner {
  position: relative;
  width: min(100%, var(--max-content-width));
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--space-lg);
}

.brand {
  display: inline-flex;
  align-items: center;
  gap: var(--space-sm);
  text-transform: uppercase;
  letter-spacing: 0.14em;
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-semibold);
}

.brand__mark {
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 45%;
  background: radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.25), rgba(255, 255, 255, 0) 60%),
    var(--gradient-juice);
  display: grid;
  place-items: center;
  color: #111;
  font-weight: var(--font-weight-semibold);
  box-shadow: var(--shadow-soft);
}

.brand__name {
  color: var(--color-ink-100);
}

.menu {
  display: flex;
  align-items: center;
  gap: var(--space-md);
  margin: 0;
  padding: 0;
  list-style: none;
}

.menu__item {
  position: relative;
}

.menu__link {
  position: relative;
  display: inline-flex;
  align-items: center;
  gap: var(--space-2xs);
  padding: var(--space-xs) 0;
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-medium);
  color: var(--color-ink-muted);
  transition: color var(--transition-fast) var(--easing-standard);
}

.menu__link::after {
  content: "";
  position: absolute;
  left: 0;
  bottom: 0;
  height: 2px;
  width: 100%;
  transform: scaleX(0);
  transform-origin: left;
  background: var(--link-underline, var(--underline-accent));
  transition: transform var(--transition-medium) var(--easing-soft),
    opacity var(--transition-medium) var(--easing-standard);
  opacity: 0.6;
}

.menu__link:hover,
.menu__link:focus-visible {
  color: color-mix(in srgb, var(--color-ink-100) 85%, white 15%);
}

.menu__link:hover::after,
.menu__link:focus-visible::after {
  transform: scaleX(1);
  opacity: 1;
}

.menu__link.is-active {
  color: color-mix(in srgb, var(--color-ink-100) 95%, white 5%);
}

.menu__link.is-active::after {
  transform: scaleX(1);
  opacity: 1;
}

.menu__link:focus-visible {
  outline: none;
  box-shadow: 0 0 0 3px color-mix(in srgb, var(--focus-ring-color) 40%, transparent),
    0 0 0 6px color-mix(in srgb, var(--focus-ring-color) 20%, transparent);
  border-radius: var(--radius-sm);
}

.menu__link.is-lemon { --link-underline: linear-gradient(90deg, rgba(248, 224, 126, 0.85), var(--color-lemon-500)); }
.menu__link.is-straw { --link-underline: linear-gradient(90deg, rgba(255, 143, 176, 0.85), var(--color-straw-500)); }
.menu__link.is-berry { --link-underline: linear-gradient(90deg, rgba(106, 160, 255, 0.85), var(--color-blue-500)); }
.menu__link.is-grape { --link-underline: linear-gradient(90deg, rgba(177, 140, 255, 0.85), var(--color-grape-500)); }
.menu__link.is-currant { --link-underline: linear-gradient(90deg, rgba(200, 99, 255, 0.85), var(--color-currant-500)); }

.nav.is-collapsed .menu {
  display: none;
}

.nav.is-expanded .menu {
  display: flex;
}

.menu.is-open {
  display: grid;
  gap: var(--space-sm);
}

/* Buttons */
.btn {
  --btn-bg: var(--color-accent);
  --btn-color: var(--color-accent-contrast);
  --btn-border: transparent;
  position: relative;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: var(--space-2xs);
  padding: calc(var(--space-sm) - 2px) var(--space-lg);
  border-radius: var(--radius-pill);
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-medium);
  letter-spacing: 0.02em;
  border: 1px solid var(--btn-border);
  background: var(--btn-bg);
  color: var(--btn-color);
  cursor: pointer;
  transition: transform var(--transition-fast) var(--easing-soft),
    background var(--transition-fast) var(--easing-standard),
    box-shadow var(--transition-fast) var(--easing-standard);
  overflow: hidden;
}

.btn:hover {
  transform: translateY(-1px);
  box-shadow: 0 14px 30px color-mix(in srgb, var(--color-accent) 18%, transparent);
}

.btn:focus-visible {
  outline: none;
  box-shadow: 0 0 0 3px color-mix(in srgb, var(--focus-ring-color) 40%, transparent),
    0 0 0 6px color-mix(in srgb, var(--focus-ring-color) 18%, transparent),
    var(--shadow-soft);
}

.btn--outline {
  --btn-bg: transparent;
  --btn-color: var(--color-ink-100);
  --btn-border: color-mix(in srgb, var(--color-accent) 55%, rgba(255, 255, 255, 0.25));
}

.btn--ghost {
  --btn-bg: color-mix(in srgb, var(--color-accent) 12%, rgba(255, 255, 255, 0.03));
  --btn-color: var(--color-ink-100);
}

.btn--sticker {
  --btn-bg: var(--color-accent);
  border-radius: 0;
  mask-image: var(--mask-sticker-edge);
  mask-size: 120% 100%;
  mask-repeat: no-repeat;
  mask-position: center;
}

.btn .ripple {
  position: absolute;
  border-radius: 50%;
  transform: scale(0);
  background: color-mix(in srgb, var(--color-accent) 70%, white 10%);
  opacity: 0.45;
  animation: ripple var(--transition-slow) ease-out;
  pointer-events: none;
}

@keyframes ripple {
  to {
    transform: scale(12);
    opacity: 0;
  }
}

/* Chips */
.chip {
  --chip-bg: color-mix(in srgb, var(--color-accent) 18%, rgba(255, 255, 255, 0.03));
  --chip-color: color-mix(in srgb, var(--color-ink-100) 80%, white 10%);
  display: inline-flex;
  align-items: center;
  gap: var(--space-2xs);
  padding: var(--space-2xs) var(--space-sm);
  border-radius: var(--radius-pill);
  font-size: var(--font-size-xs);
  text-transform: uppercase;
  letter-spacing: 0.12em;
  background: var(--chip-bg);
  color: var(--chip-color);
  border: 1px solid color-mix(in srgb, var(--color-accent) 35%, rgba(255, 255, 255, 0.08));
  background-image: var(--pattern-seeds);
  background-size: 12px;
  background-blend-mode: soft-light;
}

.chip--solid {
  --chip-bg: color-mix(in srgb, var(--color-accent) 55%, rgba(255, 255, 255, 0.08));
  color: var(--color-accent-contrast);
}

/* Badges */
.badge {
  display: inline-flex;
  align-items: center;
  gap: var(--space-2xs);
  padding: var(--space-2xs) var(--space-sm);
  border-radius: var(--radius-pill);
  font-size: var(--font-size-xs);
  font-weight: var(--font-weight-medium);
  letter-spacing: 0.08em;
  text-transform: uppercase;
  border: 1px solid color-mix(in srgb, var(--color-accent) 35%, rgba(255, 255, 255, 0.14));
  background: color-mix(in srgb, var(--color-accent) 30%, rgba(255, 255, 255, 0.06));
}

.badge--new { --color-accent: var(--color-lemon-500); }
.badge--limited { --color-accent: var(--color-grape-500); }
.badge--nic { --color-accent: var(--color-blue-500); }

/* Cards */
.card {
  position: relative;
  display: flex;
  flex-direction: column;
  gap: var(--space-sm);
  padding: var(--space-lg);
  border-radius: var(--radius-lg);
  background: linear-gradient(160deg, rgba(255, 255, 255, 0.06), rgba(255, 255, 255, 0.01)) border-box,
    linear-gradient(180deg, rgba(15, 18, 26, 0.95), rgba(6, 7, 11, 0.92)) border-box;
  border: 1px solid var(--color-border-subtle);
  box-shadow: var(--shadow-soft);
  overflow: hidden;
}

.card::before {
  content: "";
  position: absolute;
  inset: 0;
  background: var(--gradient-highlight);
  opacity: 0;
  transition: opacity var(--transition-medium) var(--easing-standard);
}

.card:hover::before {
  opacity: 1;
}

.card:hover {
  border-color: color-mix(in srgb, var(--color-accent) 25%, rgba(255, 255, 255, 0.12));
  box-shadow: var(--shadow-strong);
}

.card__fruit-gloss {
  position: absolute;
  inset: 0;
  pointer-events: none;
  background: radial-gradient(circle at 20% 20%, rgba(255, 255, 255, 0.12), transparent 55%),
    radial-gradient(circle at 80% 30%, color-mix(in srgb, var(--color-accent) 35%, transparent), transparent 60%);
  mix-blend-mode: screen;
}

/* Tabs */
.tabs {
  display: flex;
  gap: var(--space-md);
  border-bottom: 1px solid var(--color-border-subtle);
}

.tab {
  position: relative;
  padding: var(--space-sm) 0;
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-medium);
  color: var(--color-ink-muted);
  cursor: pointer;
}

.tab::after {
  content: "";
  position: absolute;
  left: 0;
  bottom: -1px;
  width: 100%;
  height: 2px;
  background: var(--underline-accent);
  transform: scaleX(0);
  transform-origin: left;
  transition: transform var(--transition-medium) var(--easing-soft);
}

.tab.is-active {
  color: var(--color-ink-100);
}

.tab.is-active::after {
  transform: scaleX(1);
}

/* Section dividers (use as ::before/::after) */
.section-divider {
  width: 100%;
  height: 2.5rem;
  mask-image: var(--mask-juice-drip);
  mask-repeat: repeat-x;
  mask-size: 180px 100%;
  background: color-mix(in srgb, var(--color-accent) 16%, rgba(255, 255, 255, 0.04));
}

/* Toasts & Modals */
.toast,
.modal {
  position: relative;
  background: color-mix(in srgb, rgba(16, 18, 26, 0.82) 80%, transparent);
  backdrop-filter: blur(22px) saturate(140%);
  border: 1px solid rgba(255, 255, 255, 0.12);
  border-radius: var(--radius-md);
  box-shadow: var(--shadow-strong);
  padding: var(--space-lg);
  color: var(--color-ink-100);
}

.toast {
  max-width: 22rem;
  display: grid;
  gap: var(--space-sm);
}

.modal {
  width: min(32rem, 90vw);
}

.modal__header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--space-sm);
  margin-bottom: var(--space-md);
}

.modal__body {
  color: var(--color-ink-muted);
}

/* Loader */
.loader--citrus {
  width: 3rem;
  height: 3rem;
  border-radius: 50%;
  background: conic-gradient(from 90deg, var(--color-accent) 0 90deg, rgba(255, 255, 255, 0.1) 90deg 180deg, var(--color-accent-soft) 180deg 270deg, rgba(255, 255, 255, 0.08) 270deg 360deg);
  position: relative;
  animation: spin var(--transition-slow) linear infinite;
  box-shadow: inset 0 0 0 2px rgba(255, 255, 255, 0.08);
}

.loader--citrus::after {
  content: "";
  position: absolute;
  inset: 28%;
  border-radius: 50%;
  background: radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.35), rgba(255, 255, 255, 0));
}

@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}

/* Utilities */
.text-accent {
  color: var(--color-accent);
}

.bg-accent-soft {
  background: color-mix(in srgb, var(--color-accent) 18%, rgba(255, 255, 255, 0.04));
}

.shadow-glow {
  box-shadow: var(--shadow-glow);
}

.glass-panel {
  background: color-mix(in srgb, rgba(16, 18, 26, 0.78) 85%, transparent);
  backdrop-filter: blur(24px) saturate(140%);
  border: 1px solid rgba(255, 255, 255, 0.14);
  box-shadow: var(--shadow-soft);
}

.hidden-visually {
  position: absolute !important;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {
  html {
    scroll-behavior: auto;
  }
  *, *::before, *::after {
    animation-duration: 1ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 1ms !important;
  }
  .btn .ripple {
    display: none !important;
  }
  .loader--citrus {
    animation: none;
  }
}

/* Responsive adjustments */
@media (max-width: 960px) {
  .nav {
    padding: 0 var(--space-md);
  }
  .nav__inner {
    gap: var(--space-md);
  }
}

@media (max-width: 720px) {
  .nav {
    min-height: var(--nav-height);
  }
  .nav__inner {
    flex-wrap: wrap;
  }
  .menu {
    width: 100%;
    justify-content: flex-start;
  }
  .nav.is-collapsed .menu {
    display: none;
  }
  .nav.is-expanded .menu {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(8rem, 1fr));
    padding: var(--space-sm) 0 var(--space-md);
    border-top: 1px solid var(--color-border-subtle);
  }
}

@media (max-width: 480px) {
  .brand__mark {
    width: 2.2rem;
    height: 2.2rem;
  }
  .brand {
    font-size: var(--font-size-xs);
  }
}
